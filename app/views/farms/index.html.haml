-content_for(:left_bar_title, "Farms")

%table#main
  %tr
    %th= sortable_header('Name', @sort_by)
    %th= sortable_header('Bushes', @sort_by)
    %th= sortable_header('Workers', @sort_by)
    %th= sortable_header('Longitude', @sort_by)
    %th= sortable_header('Latitude', @sort_by)
    %th= sortable_header('Notes', @sort_by)
    %th= sortable_header('Report Date', @sort_by)
  -@farms.each do |farm|
    %tr
      -if farm.name
        %td#main= link_to farm.name, farm
      -else
        %td#main
      -if farm.bushes
        %td#main= link_to farm.bushes, farm
      -else
        %td#main
      -if farm.workers      
        %td#main= link_to farm.workers, farm
      -else
        %td#main
      -if farm.longitude
        %td#main= link_to farm.longitude, farm
      -else
        %td#main
      -if farm.latitude
        %td#main= link_to farm.latitude, farm
      -else
        %td#main
      -if farm.notes
        %td#main= link_to farm.notes, farm
      -else
        %td#main
      %td#main= link_to farm.updated_at, farm
      %td#main= link_to('Edit', edit_farm_path(farm), :id => "edit #{farm.name}") + ' | ' + link_to('Destroy', farm, method: :delete, data: { confirm: 'Are you sure?' })
  %tr
    %td
    %td= @bush_sum
    %td
    %td
    %td
    %td
    %td
%br
= link_to 'New Farm', new_farm_path, :id => "create_farm"
%br
%br
= link_to "Export Farms as CSV", farms_path(format: "csv"), :id => "export_csv"
%br
%br
%h2 Import Farms
= form_tag import_farms_path, multipart: true do
  = file_field_tag :file, :id=>"file"
  = submit_tag "Import", :id=>"Import", :disabled=>true

:javascript
$document.ready(function() {
  $('#file').change(function() {
    $('#Import').removeAttr('disabled');
  });
});
